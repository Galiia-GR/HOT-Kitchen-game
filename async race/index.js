!function(){"use strict";var t,n,e,o,a={230:function(t,n,e){e.d(n,{Lo:function(){return s},Mb:function(){return i},PS:function(){return c},RB:function(){return o},VH:function(){return l},Yk:function(){return r}});const o="http://localhost:3000/garage";let a=0;const c=async(t,n=7)=>{try{const e=await fetch(`${o}?_page=${t}&_limit=${n}`,{method:"GET"});a=Number(e.headers.get("X-Total-count"));const c=e.json(),r=document.querySelector(".garage-count");r&&(r.innerHTML=`${a}`),console.log(c)}catch(t){console.error("Error fetching car data:",t.message)}};c(1);const r=async t=>{try{await fetch(`${o}/${t}`,{method:"DELETE"})}catch(t){console.error("Error fetching car data:",t.message)}},s=async t=>(await fetch(`${o}/${t}`,{method:"GET"})).json(),i=async(t,n)=>{try{await fetch(`${o}/${n}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(t){console.error("Error fetching car data:",t.message)}},l=async t=>{try{await fetch(o,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(t){console.error("Error fetching car data:",t.message)}}},398:function(t,n,e){e.a(t,(async function(t,o){try{e.d(n,{K0:function(){return r},b3:function(){return d},tx:function(){return l}});var a=e(510),c=t([a]);a=(c.then?(await c)():c)[0];const r="http://localhost:3000/winners";let s=0,i=0;async function l(t){try{const n=document.querySelector(".win-container"),e=await fetch(t,{method:"GET"});(await e.json()).forEach((t=>{i+=1;const e=(0,a.n9)("tr",`${t.id}`),o=`<td>${i}</td>\n        <td class = "win__look">how car look</td>\n        <td>car name</td>\n        <td>${t.wins}</td>\n        <td>${t.time}</td>`;null==n||n.append(e),e.innerHTML=o}))}catch(t){console.error("Error fetching winnersApi:",t.message)}}async function u(t,n=10){try{const e=await fetch(`${r}?_page=${t}&_limit=${n}`,{method:"GET"});s=Number(e.headers.get("X-Total-count"));const o=await e.json();console.log(o)}catch(t){console.error("Error fetching winners total count:",t.message)}const e=document.querySelector(".winners-count");e&&(e.innerHTML=`${s}`)}await l(r),u(1);const d=async t=>{try{await fetch(`${r}/${t}`,{method:"DELETE"})}catch(t){console.error("Error fetching car data:",t.message)}};o()}catch(h){o(h)}}),1)},379:function(t,n,e){e.a(t,(async function(t,n){try{var o=e(230),a=e(510),c=e(398),r=e(321),s=t([a,c]);[a,c]=s.then?(await s)():s;const i=document.querySelector(".cars-container"),l=document.querySelector(".win-container"),u=document.querySelector(".input-create__input"),d=document.querySelector(".input-create__color"),h=document.querySelector(".input-create__button"),m=document.querySelector(".input-update__input"),p=document.querySelector(".input-update__color"),f=document.querySelector(".input-update__button"),g=document.querySelector(".input-button__generate");let _;function b(){const t=document.querySelector(".garage"),n=document.querySelector(".winners"),e=document.querySelector(".switch__garage"),o=document.querySelector(".switch__winners");null==e||e.addEventListener("click",(()=>{null==t||t.classList.remove("delete"),null==i||i.classList.remove("delete"),null==n||n.classList.add("delete")})),null==o||o.addEventListener("click",(()=>{null==t||t.classList.add("delete"),null==i||i.classList.add("delete"),null==n||n.classList.remove("delete")}))}b(),document.addEventListener("click",(async t=>{const n=t.target;if(n.classList.contains("car-selectors__select")&&(_=Number(n.getAttribute("id")),(0,o.Lo)(_).then((t=>{m.value=t.name,p.value=t.color})).catch((t=>{console.error("Error getting car data:",t.message)})),null==f||f.addEventListener("click",(async()=>{""!==m.value&&(0,o.Mb)({name:m.value,color:p.value},_).then((()=>{i&&(i.innerHTML=""),(0,a.PX)(o.RB)})),m.value=""}))),n.classList.contains("car-selectors__remove")){const t=Number(n.getAttribute("id"));i&&(i.innerHTML=""),(0,o.Yk)(t).then((()=>(0,a.PX)(o.RB))),l&&(l.innerHTML=""),(0,c.b3)(t).then((()=>{(0,c.tx)(c.K0),(0,o.PS)(1)}))}})),null==h||h.addEventListener("click",(async()=>{const t=d.value,n=u.value;""!==n&&((0,o.VH)({name:n,color:t}).then((()=>{i&&(i.innerHTML=""),(0,a.PX)(o.RB),(0,o.PS)(1)})),u.value="")})),null==g||g.addEventListener("click",(async()=>{for(let t=0;t<100;t++){const t=(0,r.B)(),n=(0,r.p)();(0,o.VH)({name:`${t}`,color:`${n}`})}i&&(i.innerHTML=""),(0,a.PX)(o.RB),(0,o.PS)(1)})),n()}catch(v){n(v)}}))},510:function(t,n,e){e.a(t,(async function(t,o){try{function a(t,n){const e=document.createElement(t);return n&&(e.className=n),e}async function c(){const t=document.querySelector("body"),n=a("div","container");null==t||t.append(n),n.innerHTML='\n    <div class="wrapper">\n\n    <div class="switch">\n    <button class="switch__garage">to GARAGE</button>\n    <button class="switch__winners">to WINNERS</button>\n    </div>\n\n    <div class = "garage">\n\n    <div class="input">\n    <div class="input-create__block">\n    <input class="input-create__input">\n    <input type=\'color\' class="input-create__color">\n    <button class="input-create__button">CREATE</button>\n    </div>\n    <div class="input-update__block">\n    <input class="input-update__input">\n    <input type=\'color\' class="input-update__color">\n    <button class="input-update__button">UPDATE</button>\n    </div>\n    </div>\n\n    <div class="input-buttons">\n    <button class="input-button__race">RACE</button>\n    <button class="input-button__reset">RESET</button>\n    <button class="input-button__generate">GENERATE CARS</button>\n    </div>\n\n    <div class="garage-title">\n    <span class="garage-title__main">Garage #<span class = "garage-count"></span></span>\n    <span class="garage-title__page">Page #<span class = "garage-page-count">1</span></span>\n    <div class="pagination">\n        <button class="prev-pagination__button">Prev</button>\n        <button class="next-pagination__button">Next</button>\n      </div>\n    </div>\n\n    <div class="cars-container"></div>\n</div>\n\n<div class="winners delete">\n\n<div class="winners-title">\n    <span class="winners-title__main">Winners #<span class = "winners-count"></span></span>\n    <span class="winners-title__page">Page #<span class = "winners-page-count">1</span></span>\n    <div class="pagination-win">\n    <button class="win-prev-pagination__button">Prev</button>\n    <button class="win-next-pagination__button">Next</button>\n  </div>\n    </div>\n\n    <div class="winners-table__container">\n        <table class="table">\n          <thead>\n            <tr>\n              <th>Number</th>\n              <th>Car</th>\n              <th>Name</th>\n              <th>Wins</th>\n              <th>Best time (seconds)</th>\n            </tr>\n          </thead>\n          <tbody class="win-container">\n          </tbody>\n        </table>\n      </div>\n</div>\n'}function r(){const t=document.querySelector(".container"),n=a("footer","footer");null==t||t.appendChild(n),n.innerHTML='\n  <a class="RSS" href="https://rs.school/js/" target="_blank">\n      <img src="./images/3fc4b04a9808cbde8693.svg" width="94" height="22" alt="RS School" />\n  </a>\n  <p>\n      2023 by Galiia-GR\n      <a href="https://github.com/Galiia-GR" target="_blank">\n          <img src="./images/beb09d6d137067aa9487.svg" width="28" height="28" alt="github"\n      /></a>\n  </p>\n'}e.d(n,{PX:function(){return i},n9:function(){return a}}),c(),r();const s="http://localhost:3000/garage";async function i(t){const n=document.querySelector(".cars-container");try{const e=await fetch(t);(await e.json()).forEach((t=>{const e=a("div","car");n&&e.setAttribute("id",`${t.id}`),null==n||n.append(e);const o=`\n          <div class="car-selectors">\n          <button class="car-selectors__select" id="${t.id}">SELECT</button>\n          <button class="car-selectors__remove" id="${t.id}">REMOVE</button>\n          <button class="car-selectors__start" id="${t.id}">Start</button>\n          <button class="car-selectors__stop" id="${t.id}">Stop</button>\n          </div>\n          <h5 class="car__title">${t.name}</h5>\n          <div class="car__img" id=img-${t.id}>${c=t.color,`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 666.55878 236.45138">\n  <g id="layer1" transform="translate(2708.5 468.56)">\n  <g id="g4142">\n  <g fill='${c}'>\n  <path id="path1742" d="m-2536.4-468.56 64.435 0.0538-0.1882 21.21-21.317 0.37635 0.081 21.129 21.183 0.37634 0.3764 21.237 257.77-0.0269 0.1344-21.344 21.398 0.0269 0.215 21.371 64.301 0.18817 0.215 21.317 64.301 0.18817 0.215 21.29 21.317 0.21505-0.027 42.796-21.344 0.21507-0.2151 21.317-64.355-0.0269-0.1344-42.688-21.21-0.45699-0.3763-21.21-85.645 0.0538-0.3764 21.183-21.21 0.37635-0.1344 42.769-258.01-0.0269-0.1344-42.688-21.21-0.45699-0.3763-21.21-85.645 0.0538-0.3764 21.183-21.21 0.37635-0.1344 42.769-42.876-0.0269-0.2419-21.344-21.317-0.21507 0.027-85.806 21.344-0.21506 0.215-21.317 64.301-0.18817 0.2151-21.317 85.806-0.13441 0.215-21.371z"/>\n  <path id="path1744" d="m-2472-468.51h171.91l0.2151 21.344 42.796 0.10753 0.2151 21.398 42.903 0.10753-0.1344 21.344-257.77 0.0269-0.3763-21.237-21.183-0.37634-0.081-21.129 21.317-0.37635 0.1882-21.21z" fill='#0ff'/>\n  <path id="path1812" d="m-2213.9-318.02 42.93-0.0269 0.027 42.93-42.93 0.0269-0.027-42.93zm-387.1 0 42.93-0.0269 0.027 42.93-42.93 0.0269zm365.75-42.93 85.645-0.0538 0.3764 21.21 21.21 0.45699 0.1344 42.688-0.081 42.984-21.371 0.24194-0.2151 21.317-85.806-0.0269-0.2151-21.344-21.317-0.21505-0.081-42.93 0.1344-42.769 21.21-0.37635 0.3764-21.183m21.398 21.425-0.054 21.505h-21.452l-0.027 42.876 21.505 0.0537v21.452l42.876 0.0269 0.054-21.505h21.452l0.027-42.876-21.505-0.0537v-21.452l-42.876-0.0269zm-408.49-21.425 85.645-0.0538 0.3763 21.21 21.21 0.45699 0.1344 42.688-0.081 42.984-21.371 0.24194-0.215 21.317-85.806-0.0269-0.2151-21.344-21.317-0.21505-0.081-42.93 0.1344-42.769 21.21-0.37635 0.3763-21.183m21.398 21.425-0.054 21.505h-21.452l-0.027 42.876 21.505 0.0537v21.452l42.876 0.0269 0.054-21.505h21.452l0.027-42.876-21.505-0.0537v-21.452l-42.876-0.0269z"/>\n  <path id="path1858" d="m-2213.9-275.09 42.93-0.0269-0.054 21.505-42.876-0.0269v-21.452zm-387.1 0 42.93-0.0269-0.054 21.505-42.876-0.0269v-21.452zm430-42.957 21.505 0.0537-0.027 42.876h-21.452l-0.027-42.93zm-64.382 0.0269h21.452l0.027 42.93-21.505-0.0537 0.027-42.876zm-322.71-0.0269 21.505 0.0537-0.027 42.876h-21.452l-0.027-42.93zm-64.382 0.0269h21.452l0.027 42.93-21.505-0.0537 0.027-42.876zm408.6-21.505 42.876 0.0269v21.452l-42.93 0.0269 0.054-21.505zm-387.1 0 42.876 0.0269v21.452l-42.93 0.0269 0.054-21.505z" fill="#c0c0c0"/>\n  </g>\n  </g>\n  </g>\n  </svg>`}</div>\n          <div class="flag" id="flag-${t.id}">ðŸš©</div>`;var c;e.innerHTML=o}))}catch(t){console.error("Error fetching car data:",t.message)}}await i(s),o()}catch(l){o(l)}}),1)},330:function(t,n,e){const o="http://localhost:3000/engine";let a,c,r,s;const i=document.querySelector(".input-button__race");document.addEventListener("click",(async t=>{const n=t.target;console.log(n),n.classList.contains("car-selectors__start")&&(a=Number(n.getAttribute("id")),(async t=>{try{const n=await(async t=>{try{const n=(await fetch(`${o}?id=${t}&status=started`,{method:"PATCH"})).json();return console.log(n),n}catch(t){throw console.error("Error starting motor:",t.message),t}})(t),e=Number(n.velocity),r=Number(n.distance);s=r/e;const i=document.getElementById(`img-${t}`);if(i instanceof HTMLElement){const n=document.body.clientWidth;!function(t,n,e){let o=0;c=a,console.log(c),c=window.requestAnimationFrame((function a(r){o||(o=r);const s=(r-o)/e,i=s*n;t.style.transform=`translateX(${i}px)`,s<1&&(c=window.requestAnimationFrame(a))}))}(i,n-n/200*15,s),(await async function(t){try{const n=await fetch(`${o}?id=${t}&status=drive`,{method:"PATCH"});if(200!==n.status)return{success:!1};const e=await n.json();return console.log(e),e}catch(t){return console.error("Error driving motor:",t.message),{success:!1}}}(t)).success||window.cancelAnimationFrame(c)}}catch(t){console.error("Error starting car:",t.message)}})(a)),n.classList.contains("car-selectors__stop")&&(r=Number(n.getAttribute("id")),(async t=>{try{(async function(t){try{const n=await fetch(`${o}?id=${t}&status=stopped`,{method:"PATCH"});await n.json()}catch(t){console.error("Error stopping motor:",t.message)}})(t).then((()=>{window.cancelAnimationFrame(t);const n=document.getElementById(`img-${t}`);n instanceof HTMLElement&&(n.style.transform="translateX(0px)")}))}catch(t){console.error("Error starting car:",t.message)}})(r))})),null==i||i.addEventListener("click",(async t=>{const n=t.target;console.log(n)}))},321:function(t,n,e){function o(){const t=Math.floor(15*Math.random()),n=Math.floor(15*Math.random());return`${["Audi","Ford","Ferrari","Honda","Hyundai","Infiniti","Jeep","Kamaz","Nissan","Opel","Å koda","Suzuki","Tesla","Toyota","Volvo"][t]} ${["X5","GT4","Priora","4x4","Rio","Focus","Kalina","Nexia","Matiz","Captiva","A5","TT","Corolla","Camry","RAV4"][n]}`}function a(){const t=[0,1,2,3,4,5,6,7,8,9,"A","B","C","D","E","F"];let n="";for(let e=1;e<7;e++)n+=t[Math.floor(Math.random()*t.length)];return`#${n}`}e.d(n,{B:function(){return o},p:function(){return a}})},607:function(t,n,e){e.a(t,(async function(t,n){try{var o=e(510),a=(e(230),e(398)),c=e(379),r=(e(330),t([o,a,c]));[o,a,c]=r.then?(await r)():r,n()}catch(t){n(t)}}))}},c={};function r(t){var n=c[t];if(void 0!==n)return n.exports;var e=c[t]={exports:{}};return a[t](e,e.exports,r),e.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",n="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",e="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=function(t){t&&t.d<1&&(t.d=1,t.forEach((function(t){t.r--})),t.forEach((function(t){t.r--?t.r++:t()})))},r.a=function(a,c,r){var s;r&&((s=[]).d=-1);var i,l,u,d=new Set,h=a.exports,m=new Promise((function(t,n){u=n,l=t}));m[n]=h,m[t]=function(t){s&&t(s),d.forEach(t),m.catch((function(){}))},a.exports=m,c((function(a){var c;i=function(a){return a.map((function(a){if(null!==a&&"object"==typeof a){if(a[t])return a;if(a.then){var c=[];c.d=0,a.then((function(t){r[n]=t,o(c)}),(function(t){r[e]=t,o(c)}));var r={};return r[t]=function(t){t(c)},r}}var s={};return s[t]=function(){},s[n]=a,s}))}(a);var r=function(){return i.map((function(t){if(t[e])throw t[e];return t[n]}))},l=new Promise((function(n){(c=function(){n(r)}).r=0;var e=function(t){t!==s&&!d.has(t)&&(d.add(t),t&&!t.d&&(c.r++,t.push(c)))};i.map((function(n){n[t](e)}))}));return c.r?l:r()}),(function(t){t?u(m[e]=t):l(h),o(s)})),s&&s.d<0&&(s.d=0)},r.d=function(t,n){for(var e in n)r.o(n,e)&&!r.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r(607)}();